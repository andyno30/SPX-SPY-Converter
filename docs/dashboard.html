<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spyconverter Pro Dashboard</title>
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <div class="main-container">
        <h1>Welcome to Spyconverter Pro!</h1>
        <p>You are logged in.</p>
        <p id="user-email">Email: Loading...</p>
        <p id="user-status">Status: Loading...</p>
        <button id="subscribe-btn">Subscribe</button>
        <button id="access-spyconverterpro-btn" style="display: none;">Go to Spyconverter Pro</button>
        <button id="delete-account-btn">Delete Account</button>
        <p id="delete-feedback"></p>
    </div>
    <script src="script.js"></script>
    <script>
        const token = localStorage.getItem('authToken');
        if (!token) {
            window.location.href = 'login.html';
        } else {
            fetchUserInfo();
            if (window.location.search.includes('success=true')) {
                document.getElementById('user-status').textContent = 'Processing subscription...';
                setTimeout(fetchUserInfo, 3000);
            }
        }

        document.getElementById('subscribe-btn').addEventListener('click', function() {
            window.location.href = '../pro.html#pricing';
        });

        document.getElementById('access-spyconverterpro-btn').addEventListener('click', function() {
            window.location.href = 'spyconverterpro.html';
        });

        document.getElementById('delete-account-btn').addEventListener('click', function() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                deleteAccount();
            }
        });
    </script>
</body>
</html>
