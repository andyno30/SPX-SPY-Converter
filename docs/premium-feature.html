<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Conversion Tool - Spyconverter Pro</title>
    <link href="pro_styles.css" rel="stylesheet">
    <script async crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2918914879248661"></script>
</head>
<body>
    <nav>
        <a class="logo" href="#"><h4>spyconverter.com</h4></a>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="relationship.html">Relationship</a></li>
            <li><a href="blog.html">Blog</a></li>
            <li class="dropdown">
                <a href="aboutus.html">About Us</a>
                <div class="dropdown-content">
                    <a href="aboutus.html#about-us">About Us</a>
                    <a href="aboutus.html#privacy-policy">Privacy Policy</a>
                    <a href="aboutus.html#contact-us">Contact Us</a>
                    <a href="aboutus.html#disclaimer">Disclaimer</a>
                    <a href="aboutus.html#terms-and-conditions">Terms and Conditions</a>
                </div>
            </li>
            <li><a href="dashboard.html">Dashboard</a></li>
        </ul>
    </nav>
    
    <div class="premium-container">
        <h1>Premium Conversion Tool</h1>
        <p>Conversion data last updated: <span id="conversionDate">Loading...</span></p>
        
        <div id="premium-conversion">
            <div class="conversion-controls">
                <select id="from-ticker">
                    <option value="">From</option>
                    <option value="SPX">SPX</option>
                    <option value="SPY">SPY</option>
                    <option value="ES">ES</option>
                    <option value="NQ">NQ</option>
                    <option value="QQQ">QQQ</option>
                    <option value="NDX">NDX</option>
                </select>
                <select id="to-ticker">
                    <option value="">To</option>
                    <option value="SPX">SPX</option>
                    <option value="SPY">SPY</option>
                    <option value="ES">ES</option>
                    <option value="NQ">NQ</option>
                    <option value="QQQ">QQQ</option>
                    <option value="NDX">NDX</option>
                </select>
                <input type="number" id="convert-input" placeholder="Enter value" step="0.01">
                <button onclick="convertPremium()">Convert</button>
            </div>
            <p id="convert-output"></p>
        </div>

        <div id="current-ratios">
            <h3>Live Ratios (8 Decimal Places)</h3>
            <p>SPX to SPY: <span id="ratio-spx-spy">Loading...</span></p>
            <p>SPY to SPX: <span id="ratio-spy-spx">Loading...</span></p>
            <p>ES to SPY: <span id="ratio-es-spy">Loading...</span></p>
            <p>NQ to QQQ: <span id="ratio-nq-qqq">Loading...</span></p>
            <p>NDX to QQQ: <span id="ratio-ndx-qqq">Loading...</span></p>
            <p>ES to SPX: <span id="ratio-es-spx">Loading...</span></p>
        </div>
    </div>

    <footer>
        <p>Â© 2023 spyconverter.com. All rights reserved.</p>
    </footer>
    
    <script src="pro_script.js"></script>
    <script>
        const token = localStorage.getItem('authToken');
        const backendURL = "https://spx-spy-converter.onrender.com";

        if (!token) {
            window.location.href = 'login.html';
        } else {
            fetch(`${backendURL}/user`, {
                headers: { 'Authorization': `Bearer ${token}` }
            })
            .then(response => response.json())
            .then(data => {
                if (!data.isSubscribed) {
                    window.location.href = 'dashboard.html';
                }
            })
            .catch(error => {
                console.error('Error checking subscription:', error);
                window.location.href = 'dashboard.html';
            });
        }

        // Fetch live ratios
        function fetchLiveRatios() {
            fetch(`${backendURL}/get_live_price`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById("ratio-spx-spy").innerText = parseFloat(data["SPX/SPY"]).toFixed(8);
                    document.getElementById("ratio-spy-spx").innerText = parseFloat(data["SPY/SPX"]).toFixed(8);
                    document.getElementById("ratio-es-spy").innerText = parseFloat(data["ES/SPY"]).toFixed(8);
                    document.getElementById("ratio-nq-qqq").innerText = parseFloat(data["NQ/QQQ"]).toFixed(8);
                    document.getElementById("ratio-ndx-qqq").innerText = parseFloat(data["NDX/QQQ"]).toFixed(8);
                    document.getElementById("ratio-es-spx").innerText = parseFloat(data["ES/SPX"]).toFixed(8);
                })
                .catch(error => console.error("Error fetching live ratios:", error));
        }

        fetchLiveRatios();
        setInterval(fetchLiveRatios, 5000); // Refresh every 5 seconds

    </script>
</body>
</html>

